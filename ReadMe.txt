# README Generator for Divorce Rates Analysis Project
# This script creates a professional README.md file for the project

create_professional_readme <- function(project_path = ".") {
  
  # Define README content as a character vector
  readme_content <- c(
    "# Divorce Rates in Israel: Demographic and Cultural Analysis",
    "",
    "[![R](https://img.shields.io/badge/R-276DC3?style=for-the-badge&logo=r&logoColor=white)](https://www.r-project.org/)",
    "[![RStudio](https://img.shields.io/badge/RStudio-4285F4?style=for-the-badge&logo=rstudio&logoColor=white)](https://rstudio.com/)",
    "[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)",
    "",
    "> A comprehensive statistical analysis exploring the demographic, socioeconomic, and cultural predictors of divorce rates across Israeli municipalities using k-means clustering and multivariate analysis.",
    "",
    "## 📋 Table of Contents",
    "- [Overview](#overview)",
    "- [Key Findings](#key-findings)", 
    "- [Dataset](#dataset)",
    "- [Installation](#installation)",
    "- [Usage](#usage)",
    "- [Methodology](#methodology)",
    "- [Results](#results)",
    "- [Limitations](#limitations)",
    "- [Future Work](#future-work)",
    "- [Contributing](#contributing)",
    "- [References](#references)",
    "",
    "## 🎯 Overview",
    "",
    "This project investigates the factors influencing divorce rates in Israeli cities through advanced statistical analysis of government data. Using 2019 as a baseline year (pre-COVID), we analyze **64 demographic, economic, and cultural variables** across Israeli municipalities to identify patterns and predictors of marital stability.",
    "",
    "### Why This Study Matters",
    "- Israel has a divorce rate close to the OECD average",
    "- Rich social, religious, and demographic diversity provides unique insights",
    "- Comprehensive government data availability",
    "- Implications for family policy and social support systems",
    "",
    "### Research Questions",
    "1. What are the dominant predictors of divorce in Israel?",
    "2. How do cultural and religious factors influence divorce rates?",
    "3. Can we identify distinct community types based on family stability patterns?",
    "",
    "## 🔍 Key Findings",
    "",
    "### Primary Discoveries",
    "- **Cultural identity dominates over pure demographics** as a predictor",
    "- **Religious communities show significantly lower divorce rates**",
    "- **Age and education interact with cultural factors in complex ways**",
    "",
    "### Cluster Analysis Results",
    "",
    "| Cluster Type | Divorce Rate | Population Age | Key Characteristics |",
    "|--------------|--------------|----------------|-------------------|",
    "| **Jewish-Majority Cities** | 1.69% (highest) | ~35 years | Young, lower education |",
    "| **Arab-Majority Cities** | 0.82% (lowest) | ~42.2 years | Older, high job-seeking |",
    "| **Mixed Cities** | 1.48% (moderate) | ~39.7 years | Balanced indicators |",
    "",
    "## 📊 Dataset",
    "",
    "### Data Structure",
    "- **64 features** across Israeli municipalities",
    "- **2019 baseline year** (pre-COVID)",
    "- **Multiple government sources** integrated",
    "",
    "### File Descriptions",
    "",
    "```",
    "data/",
    "├── Demographic.xlsx      # Job seeker demographics by city and month",
    "├── Population.xlsx       # City population breakdown by ethnicity", 
    "├── Divorces.csv         # Annual divorce counts per municipality",
    "├── Election.csv         # 2019 election voting data by party",
    "├── Age.csv             # Population age group distributions",
    "└── Population_TJBN.csv  # Manual data for 5 key cities (2015-2019)",
    "```",
    "",
    "### Key Variables",
    "",
    "#### Target Variable",
    "- `divorces_sum`: Total number of divorces per city in 2019",
    "",
    "#### Predictor Categories",
    "- **Demographic**: Population size, age groups, ethnic composition",
    "- **Socioeconomic**: Employment, education, economic indicators", 
    "- **Cultural**: Voting patterns, religious community proxies",
    "",
    "## 🚀 Installation",
    "",
    "### System Requirements",
    "- R (≥ 4.0.0)",
    "- RStudio (recommended for .Rmd files)",
    "",
    "### Package Installation",
    "```r",
    "# Install all required packages",
    "required_packages <- c(",
    "  'tidyverse',    # Data manipulation ecosystem",
    "  'readxl',       # Excel file reading",
    "  'ggplot2',      # Advanced visualization",
    "  'cluster',      # Clustering algorithms",
    "  'clusterCrit',  # Cluster validation",
    "  'caret',        # Machine learning tools",
    "  'dplyr',        # Data transformation",
    "  'knitr',        # Report generation",
    "  'corrplot',     # Correlation visualization",
    "  'plotly'        # Interactive plots",
    ")",
    "",
    "# Check and install missing packages",
    "new_packages <- required_packages[!(required_packages %in% installed.packages()[,'Package'])]",
    "if(length(new_packages)) install.packages(new_packages)",
    "",
    "# Load all packages",
    "lapply(required_packages, library, character.only = TRUE)",
    "```",
    "",
    "## 📈 Usage",
    "",
    "### Quick Start",
    "```r",
    "# Clone and navigate to project",
    "# git clone https://github.com/NaamaNigri01/DivorceRatesProject.git",
    "# setwd('DivorceRatesProject')",
    "",
    "# Open main analysis file",
    "file.edit('Final_project.Rmd')",
    "",
    "# Generate complete report",
    "rmarkdown::render('Final_project.Rmd')",
    "```",
    "",
    "### Step-by-Step Analysis",
    "```r",
    "# 1. Load and explore data",
    "source('data_loading.R')",
    "summary(divorce_data)",
    "",
    "# 2. Perform initial city comparison",
    "compare_key_cities(c('Tel Aviv', 'Jerusalem', 'Bnei Brak'))",
    "",
    "# 3. Cultural pattern analysis",
    "analyze_voting_patterns(election_data)",
    "",
    "# 4. K-means clustering",
    "clusters <- perform_clustering_analysis(demographic_data, k = 3)",
    "",
    "# 5. Generate visualizations",
    "create_all_plots()",
    "```",
    "",
    "### Custom Analysis",
    "```r",
    "# Filter cities by population size",
    "medium_cities <- filter_cities_by_population(min_pop = 10000, max_pop = 100000)",
    "",
    "# Analyze specific cultural groups",
    "haredi_analysis <- analyze_haredi_cities(voting_threshold = 0.3)",
    "",
    "# Create custom visualizations",
    "plot_custom_comparison(cities = c('Haifa', 'Ashdod', 'Netanya'))",
    "```",
    "",
    "## 🔬 Methodology",
    "",
    "### Analytical Framework",
    "",
    "1. **Exploratory Data Analysis**",
    "   - Initial city comparisons",
    "   - Correlation analysis",
    "   - Distribution examination",
    "",
    "2. **Feature Engineering**",
    "   - Cultural proxy creation from voting data",
    "   - Demographic ratio calculations",
    "   - Missing data imputation",
    "",
    "3. **Clustering Analysis**",
    "   - K-means segmentation (k=3)",
    "   - Silhouette validation",
    "   - Cluster characterization",
    "",
    "4. **Statistical Testing**",
    "   - ANOVA for group differences",
    "   - Correlation significance testing",
    "   - Cluster stability assessment",
    "",
    "### Cultural Proxy Development",
    "```r",
    "# Example: Creating cultural voting categories",
    "election_data <- election_data %>%",
    "  mutate(",
    "    votes_haredi = שס + ג + דעם,  # Ultra-Orthodox parties",
    "    votes_arab = רעם + חדש,        # Arab parties", 
    "    votes_secular = מרצ + כחול_לבן  # Secular parties",
    "  )",
    "```",
    "",
    "## 📊 Results",
    "",
    "### Statistical Summary",
    "```r",
    "# Key findings from cluster analysis",
    "cluster_summary <- data.frame(",
    "  Cluster = c('Jewish-Majority', 'Arab-Majority', 'Mixed'),",
    "  Divorce_Rate = c(1.69, 0.82, 1.48),",
    "  Avg_Age = c(35.0, 42.2, 39.7),",
    "  Education_Score = c('Lower', 'Moderate', 'Higher')",
    ")",
    "",
    "print(cluster_summary)",
    "```",
    "",
    "### Visualization Examples",
    "```r",
    "# Create main comparison plot",
    "ggplot(city_comparison_data, aes(x = city_type, y = divorce_rate)) +",
    "  geom_boxplot(aes(fill = cultural_category)) +",
    "  labs(title = 'Divorce Rates by Cultural Category',",
    "       x = 'City Type', y = 'Divorce Rate (%)') +",
    "  theme_minimal()",
    "",
    "# Cluster visualization",
    "plot_clusters(demographic_clusters, color_by = 'divorce_rate')",
    "```",
    "",
    "## ⚠️ Limitations",
    "",
    "### Data Quality Issues",
    "- **Missing municipalities**: Some Arab cities lack complete data",
    "- **Temporal limitations**: Single-year snapshot (2019)",
    "- **Reporting bias**: Potential underreporting in traditional communities",
    "",
    "### Methodological Constraints",
    "- Municipal-level aggregation masks individual variation",
    "- Cultural proxies may oversimplify community diversity",
    "- Causal inference limited with observational data",
    "",
    "## 🔮 Future Work",
    "",
    "### Immediate Priorities",
    "```r",
    "# Planned enhancements",
    "future_work <- list(",
    "  short_term = c(",
    "    'Individual-level data collection',",
    "    'Qualitative interviews with legal professionals',",
    "    'Common divorce cause categorization'",
    "  ),",
    "  medium_term = c(",
    "    'Multi-year longitudinal analysis (2015-2023)',",
    "    'Enhanced demographic indicators',", 
    "    'COVID-19 impact assessment'",
    "  ),",
    "  long_term = c(",
    "    'International comparative analysis',",
    "    'Economic indicator integration',",
    "    'Predictive modeling development'",
    "  )",
    ")",
    "```",
    "",
    "## 🤝 Contributing",
    "",
    "### Development Workflow",
    "```bash",
    "# Fork and clone",
    "git clone https://github.com/YourUsername/DivorceRatesProject.git",
    "cd DivorceRatesProject",
    "",
    "# Create feature branch",
    "git checkout -b feature/new-analysis",
    "",
    "# Make changes and commit",
    "git add .",
    "git commit -m 'Add new analysis feature'",
    "",
    "# Push and create PR",
    "git push origin feature/new-analysis",
    "```",
    "",
    "### Code Style Guidelines",
    "```r",
    "# Follow tidyverse style conventions",
    "# Use snake_case for variables",
    "divorce_rate_analysis <- function(data) {",
    "  # Document functions with roxygen2",
    "  #' Analyze divorce rate patterns",
    "  #' @param data DataFrame with city-level data",
    "  #' @return List with analysis results",
    "  ",
    "  result <- data %>%",
    "    filter(!is.na(divorces_sum)) %>%",
    "    group_by(cultural_category) %>%",
    "    summarise(mean_divorce_rate = mean(divorce_rate))",
    "  ",
    "  return(result)",
    "}",
    "```",
    "",
    "## 📄 License",
    "",
    "MIT License - see LICENSE file for details",
    "",
    "## 🎓 Academic Information",
    "",
    "**Authors**: David Kalimi  ",
    "**Institution**: [Your University]  ",
    "**Course**: Data Analysis in R  ",
    "**Year**: 2024  ",
    "",
    "### Citation",
    "```bibtex",
    "@misc{kalimi2024divorce,",
    "  title={Divorce Rates in Israel: A Demographic and Cultural Analysis},",
    "  author={Kalimi, David},",
    "  year={2024},",
    "  url={https://github.com/NaamaNigri01/DivorceRatesProject}",
    "}",
    "```",
    "",
    "## 📞 Contact",
    "",
    "- **GitHub**: [Repository Issues](https://github.com/NaamaNigri01/DivorceRatesProject/issues)",
    "- **Data**: [Google Drive](https://drive.google.com/drive/folders/1lDg3He8peEky0_dCqKqRCU_FWzsmPqsC)",
    "- **Email**: [Your Email]",
    "",
    "---",
    "",
    "*This research contributes to understanding family dynamics in diverse societies and provides evidence-based insights for policy development.*"
  )
  
  # Write README file
  readme_path <- file.path(project_path, "README.md")
  writeLines(readme_content, readme_path)
  
  cat("✅ Professional README.md created successfully at:", readme_path, "\n")
  cat("📁 File size:", file.size(readme_path), "bytes\n")
  
  # Return the content for preview
  return(readme_content)
}

# Additional helper functions for README customization

add_badges <- function() {
  badges <- c(
    "[![R](https://img.shields.io/badge/R-276DC3?style=for-the-badge&logo=r&logoColor=white)](https://www.r-project.org/)",
    "[![RStudio](https://img.shields.io/badge/RStudio-4285F4?style=for-the-badge&logo=rstudio&logoColor=white)](https://rstudio.com/)",
    "[![tidyverse](https://img.shields.io/badge/tidyverse-1A162D?style=for-the-badge&logo=tidyverse&logoColor=white)](https://www.tidyverse.org/)",
    "[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)"
  )
  return(badges)
}

create_data_table <- function() {
  data_info <- data.frame(
    File = c("Demographic.xlsx", "Population.xlsx", "Divorces.csv", 
             "Election.csv", "Age.csv", "Population_TJBN.csv"),
    Records = c("Municipal-level", "255 cities", "Annual data", 
                "2019 results", "Age groups", "5 cities"),
    Description = c("Job seeker demographics", "Population by ethnicity", 
                   "Divorce counts", "Voting patterns", "Age distributions", 
                   "Key cities data")
  )
  
  # Convert to markdown table
  table_md <- c(
    "| File | Records | Description |",
    "|------|---------|-------------|"
  )
  
  for(i in 1:nrow(data_info)) {
    row <- paste0("| `", data_info$File[i], "` | ", 
                  data_info$Records[i], " | ", 
                  data_info$Description[i], " |")
    table_md <- c(table_md, row)
  }
  
  return(table_md)
}

create_installation_section <- function() {
  install_code <- c(
    "### System Requirements",
    "- R (≥ 4.0.0)",
    "- RStudio (recommended)",
    "",
    "### Package Installation",
    "```r",
    "# Required packages",
    "required_packages <- c(",
    "  'tidyverse',    # Data manipulation ecosystem",
    "  'readxl',       # Excel file reading", 
    "  'ggplot2',      # Advanced visualization",
    "  'cluster',      # Clustering algorithms",
    "  'clusterCrit',  # Cluster validation",
    "  'caret',        # Machine learning tools",
    "  'dplyr',        # Data transformation",
    "  'knitr'         # Report generation",
    ")",
    "",
    "# Install missing packages",
    "new_packages <- required_packages[!(required_packages %in% installed.packages()[,'Package'])]",
    "if(length(new_packages)) install.packages(new_packages)",
    "",
    "# Load all packages",
    "lapply(required_packages, library, character.only = TRUE)",
    "```"
  )
  return(install_code)
}

# Usage example:
# readme_content <- create_professional_readme()
# cat("README created with", length(readme_content), "lines")

# Run this to create the README file
create_professional_readme()